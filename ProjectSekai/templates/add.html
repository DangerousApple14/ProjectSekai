{% extends "layout.html" %}

{% block title %}
    Log in
{% endblock %}

{% block body %}

    <div class="box" style="height: 225%; overflow-y: auto; overflow-x: hidden;">
        <form action="/add" method="post" onsubmit="return validateForm()">
            <div class="mb-3">
                <input autocomplete="off" autofocus class="form-control mx-auto w-auto" id="title" name="title" placeholder="Task title" type="text" style="font-size: 40px;">
                <p id="titleError" style="color: red;"></p>
            </div>
            <div class="mb-3">
                <textarea class="form-control mx-auto w-auto" id="desc" name="desc" placeholder="Task Description" style="height: 125px; margin: 10px; white-space: pre-wrap;"></textarea>
                <p id="descError" style="color: red;"></p>
            </div>
            <label for="date">Deadline date:</label><br>
            <input type="date" id="date" name="date">
            <p id="dateError" style="color: red;"></p>
            <label for="time">Deadline time:</label><br>
            <input type="time" id="time" name="time">
            <p id="timeError" style="color: red;"></p>
            <br>
            <button class="btn" type="submit">Add task</button>
        </form>

        <script>
            function validateForm() {
                var title = document.getElementById("title").value;
                var desc = document.getElementById("desc").value;
                var date = document.getElementById("date").value;
                var time = document.getElementById("time").value;

                // Reset error messages
                document.getElementById("titleError").innerText = "";
                document.getElementById("descError").innerText = "";
                document.getElementById("dateError").innerText = "";
                document.getElementById("timeError").innerText = "";

                var isValid = true;

                if (!title) {
                    document.getElementById("titleError").innerText = "Task title is required.";
                    isValid = false;
                }

                if (!desc) {
                    document.getElementById("descError").innerText = "Task description is required.";
                    isValid = false;
                }

                if (!date) {
                    document.getElementById("dateError").innerText = "Deadline date is required.";
                    isValid = false;
                }

                if (!time) {
                    document.getElementById("timeError").innerText = "Deadline time is required.";
                    isValid = false;
                }

                return isValid;
            }
        </script>
    </div>

{% endblock %}
